<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- Remove legacy client dashboard actions ONLY (keep window actions) -->
        <delete model="ir.actions.client" search="[('tag', 'in', ['kcca_dashboard','kcca_pmis_dashboard','strategic_programme_dashboard'])]"/>
        <delete model="ir.actions.client" search="[('name', 'ilike', 'kcca dashboard')]"/>
        <delete model="ir.actions.client" search="[('name', 'ilike', 'strategic performance dashboard')]"/>
        <delete model="ir.actions.client" search="[('name', 'ilike', 'performance dashboard')]"/>

        <!-- Remove any problematic menu items -->
        <delete model="ir.ui.menu" search="[('name', '=', 'ðŸ“Š Strategic Performance Dashboard')]"/>
        <delete model="ir.ui.menu" search="[('name', '=', 'Strategic Performance Dashboard')]"/>
        <delete model="ir.ui.menu" search="[('name', 'ilike', 'strategic performance dashboard')]"/>
        <delete model="ir.ui.menu" search="[('name', 'ilike', 'kcca dashboard')]"/>

    <!-- Remove any legacy dashboard client actions, but explicitly KEEP our new dashboards -->
    <!-- Exclude both 'unified_kpi_dashboard' (All KPIs hub) and 'kpi_linkage_dashboard' from deletion -->
    <delete model="ir.actions.client" search="[('tag', 'ilike', 'dashboard'), ('tag', 'not in', ['unified_kpi_dashboard','kpi_linkage_dashboard'])]"/>

        <!-- Removed invalid clear_caches function calls causing errors -->

        <!-- Remove specific problematic client actions -->
        <delete model="ir.actions.client" search="[('tag', '=', 'strategic_programme_dashboard')]"/>
        <delete model="ir.ui.menu" search="[('name', '=', 'Strategic-Programme Dashboard')]"/>

        <!-- Clear legacy QWeb dashboards (keep backend form/kanban views) -->
        <delete model="ir.ui.view" search="[('type', '=', 'qweb'), ('name', 'ilike', 'kcca%dashboard%')]"/>

        <!-- Clean up user action references -->
        <record id="base.user_admin" model="res.users">
            <field name="action_id" eval="False"/>
        </record>

        <record id="user_kcca_demo" model="res.users">
            <field name="action_id" eval="False"/>
        </record>
    </data>
</odoo>
