<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
            <record id="view_performance_dashboard_form" model="ir.ui.view">
            <field name="name">performance.dashboard.form</field>
            <field name="model">performance.dashboard</field>
            <field name="arch" type="xml">
                <form string="KCCA Executive Performance Dashboard" class="o_fullscreen_dashboard">
                    <div class="dashboard-container" style="width: 100%; height: 100vh; overflow: auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;">
                        
                        <!-- Full Screen Header -->
                        <div class="dashboard-header" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: white; padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.2);">
                            <div>
                                <h1 style="margin: 0; font-size: 1.8em; font-weight: 600; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 1.2em;">ÔøΩ</span> KCCA Executive Dashboard
                                </h1>
                                <p style="margin: 5px 0 0 0; font-size: 0.9em; opacity: 0.9; font-weight: 300;">
                                    Strategic Performance Intelligence ‚Ä¢ Real-time Insights
                                </p>
                            </div>
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <button style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">Refresh Data</button>
                                <button style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">Export</button>
                            </div>
                        </div>
                        
                        <!-- Main Dashboard Grid -->
                        <div style="padding: 20px; display: grid; grid-template-columns: 2fr 3fr 2fr; grid-template-rows: auto auto auto; gap: 20px; height: calc(100vh - 100px); overflow: auto;">
                            
                            <!-- Left Column: Key Metrics -->
                            <div style="grid-column: 1; grid-row: 1 / span 2; display: flex; flex-direction: column; gap: 15px;">
                                <!-- Strategic Goals Card -->
                                <div class="metric-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; padding: 25px; text-align: center; color: white; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.15);" onclick="window.open('/web#action=robust_pmis.action_strategic_goal&amp;model=strategic.goal&amp;view_type=kanban', '_self')">
                                    <div style="font-size: 3em; margin-bottom: 10px;">üéØ</div>
                                    <div style="font-size: 3em; font-weight: 700; margin: 10px 0;"><field name="total_strategic_goals" readonly="1"/></div>
                                    <div style="font-size: 1.2em; font-weight: 600;">Strategic Goals</div>
                                    <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">Organization-wide objectives</div>
                                </div>
                                
                                <!-- KRAs Card -->
                                <div class="metric-card" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 15px; padding: 25px; text-align: center; color: white; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.15);" onclick="window.open('/web#action=robust_pmis.action_key_result_area&amp;model=key.result.area&amp;view_type=kanban', '_self')">
                                    <div style="font-size: 3em; margin-bottom: 10px;">üìã</div>
                                    <div style="font-size: 3em; font-weight: 700; margin: 10px 0;"><field name="total_kras" readonly="1"/></div>
                                    <div style="font-size: 1.2em; font-weight: 600;">Key Result Areas</div>
                                    <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">Strategic focus areas</div>
                                </div>
                            </div>
                            
                            <!-- Center Column: Main Charts -->
                            <div style="grid-column: 2; grid-row: 1 / span 3; display: flex; flex-direction: column; gap: 20px;">
                                <!-- Performance Overview Chart -->
                                <div style="background: white; border-radius: 15px; padding: 25px; flex: 2; box-shadow: 0 8px 25px rgba(0,0,0,0.1); display: flex; flex-direction: column;">
                                    <h3 style="margin: 0 0 20px 0; color: #2d3748; font-size: 1.3em; font-weight: 600; display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.2em;">üìà</span> Performance Overview
                                    </h3>
                                    <div style="flex: 1; position: relative; min-height: 300px;">
                                        <canvas id="performanceOverviewChart" style="width: 100% !important; height: 100% !important;"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Performance Trends -->
                                <div style="background: white; border-radius: 15px; padding: 25px; flex: 1; box-shadow: 0 8px 25px rgba(0,0,0,0.1); display: flex; flex-direction: column;">
                                    <h3 style="margin: 0 0 15px 0; color: #2d3748; font-size: 1.2em; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                                        <span style="font-size: 1.1em;">üìä</span> Performance Trends
                                    </h3>
                                    <div style="flex: 1; position: relative; min-height: 200px;">
                                        <canvas id="trendsChart" style="width: 100% !important; height: 100% !important;"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Column: KPIs and Status -->
                            <div style="grid-column: 3; grid-row: 1 / span 3; display: flex; flex-direction: column; gap: 15px;">
                                <!-- KPIs Card -->
                                <div class="metric-card" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); border-radius: 15px; padding: 20px; text-align: center; color: #333; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.15);" onclick="window.open('/web#action=robust_pmis.action_key_performance_indicator&amp;model=key.performance.indicator&amp;view_type=kanban', '_self')">
                                    <div style="font-size: 2.5em; margin-bottom: 8px;">üìä</div>
                                    <div style="font-size: 2.5em; font-weight: 700; margin: 8px 0;"><field name="total_kpis" readonly="1"/></div>
                                    <div style="font-size: 1.1em; font-weight: 600;">Performance Indicators</div>
                                    <div style="font-size: 0.85em; opacity: 0.8; margin-top: 3px;">Metrics tracking</div>
                                </div>
                                
                                <!-- Programmes Card -->
                                <div class="metric-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 15px; padding: 20px; text-align: center; color: #333; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.15);" onclick="window.open('/web#action=robust_pmis.action_kcca_programme&amp;model=kcca.programme&amp;view_type=kanban', '_self')">
                                    <div style="font-size: 2.5em; margin-bottom: 8px;">üìÅ</div>
                                    <div style="font-size: 2.5em; font-weight: 700; margin: 8px 0;"><field name="total_programmes" readonly="1"/></div>
                                    <div style="font-size: 1.1em; font-weight: 600;">Active Programmes</div>
                                    <div style="font-size: 0.85em; opacity: 0.8; margin-top: 3px;">Implementation</div>
                                </div>
                                
                                <!-- Organizational Structure -->
                                <div style="background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; flex: 1; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                                    <h4 style="margin: 0 0 15px 0; color: #2d3748; font-size: 1.1em; font-weight: 600;">Organization Structure</h4>
                                    
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; margin: 8px 0; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border-radius: 10px; cursor: pointer;" onclick="window.open('/web#action=robust_pmis.action_kcca_directorate&amp;model=kcca.directorate&amp;view_type=kanban', '_self')">
                                        <div>
                                            <div style="font-size: 1.1em; font-weight: 600; color: #333;">Directorates</div>
                                            <div style="font-size: 0.85em; color: #666;">Leadership units</div>
                                        </div>
                                        <div style="font-size: 1.8em; font-weight: 700; color: #333;"><field name="total_directorates" readonly="1"/></div>
                                    </div>
                                    
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; margin: 8px 0; background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%); border-radius: 10px; cursor: pointer;" onclick="window.open('/web#action=robust_pmis.action_kcca_division&amp;model=kcca.division&amp;view_type=kanban', '_self')">
                                        <div>
                                            <div style="font-size: 1.1em; font-weight: 600; color: #333;">Divisions</div>
                                            <div style="font-size: 0.85em; color: #666;">Operational units</div>
                                        </div>
                                        <div style="font-size: 1.8em; font-weight: 700; color: #333;"><field name="total_divisions" readonly="1"/></div>
                                    </div>
                                </div>
                                
                                <!-- Performance Distribution Chart -->
                                <div style="background: white; border-radius: 15px; padding: 20px; flex: 1; box-shadow: 0 8px 25px rgba(0,0,0,0.1); display: flex; flex-direction: column;">
                                    <h4 style="margin: 0 0 15px 0; color: #2d3748; font-size: 1.1em; font-weight: 600;">Performance Distribution</h4>
                                    <div style="flex: 1; position: relative; min-height: 180px;">
                                        <canvas id="distributionChart" style="width: 100% !important; height: 100% !important;"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </form>
            </field>
        </record>
        
    <!-- Action for unified performance dashboard -->
    <record id="action_performance_dashboard_unified" model="ir.actions.act_window">
      <field name="name">Organization Performance Dashboard</field>
      <field name="res_model">performance.dashboard</field>
      <field name="view_mode">form</field>
      <field name="view_id" ref="view_performance_dashboard_form"/>
      <field name="res_id" ref="performance_dashboard_record"/>
      <field name="target">current</field>
    </record>

    <!-- Menu entry as FIRST item under KCCA Performance Management -->
    <menuitem id="menu_performance_dashboard_unified" parent="menu_kcca_pmis_root"
              name="üìä Executive Dashboard" action="action_performance_dashboard_unified"
              sequence="5"/>
  </data>
</odoo>
