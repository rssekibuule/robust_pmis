<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Financial Strategy List View -->
        <record id="view_financial_strategy_list" model="ir.ui.view">
            <field name="name">financial.strategy.list</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <list string="Financial Strategies" decoration-success="status=='active'" decoration-info="status=='approved'" decoration-muted="status=='cancelled'">
                    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="status" widget="badge" decoration-success="status=='active'" decoration-info="status=='approved'" decoration-warning="status=='draft'" decoration-danger="status=='cancelled'"/>
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="total_budget_all_years" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="responsible_user_id" widget="many2one_avatar_user"/>
                    <field name="currency_id" invisible="1"/>
                </list>
            </field>
        </record>

        <!-- Financial Strategy Form View -->
        <record id="view_financial_strategy_form" model="ir.ui.view">
            <field name="name">financial.strategy.form</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <form string="Financial Strategy">
                    <header>
                        <!-- Status Actions -->
                        <button name="action_approve" string="Approve" type="object" class="btn-primary" invisible="status != 'draft'"/>
                        <button name="action_activate" string="Activate" type="object" class="btn-primary" invisible="status != 'approved'"/>
                        <button name="action_complete" string="Complete" type="object" class="btn-success" invisible="status != 'active'"/>
                        <button name="action_cancel" string="Cancel" type="object" class="btn-secondary" invisible="status in ['completed', 'cancelled']"/>

                        <!-- Financial Analysis Actions -->
                        <button name="action_create_budget_variance_analysis" string="üìä Budget Variance Analysis" type="object" class="btn-info"/>
                        <button name="action_create_funding_analysis" string="üí∞ Funding Analysis" type="object" class="btn-info"/>
                        <button name="action_create_programme_efficiency_analysis" string="‚ö° Efficiency Analysis" type="object" class="btn-info"/>
                        <button name="action_create_budget_performance_integration" string="üîó Budget-Performance Integration" type="object" class="btn-warning"/>
                        <button name="action_create_executive_dashboard" string="üìà Executive Dashboard" type="object" class="btn-success"/>

                        <field name="status" widget="statusbar" statusbar_visible="draft,approved,active,completed"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Financial Strategy Name..."/>
                            </h1>
                        </div>
                        
                        <group>
                            <group string="Basic Information">
                                <field name="sequence"/>
                                <field name="active"/>
                                <field name="responsible_user_id" widget="many2one_avatar_user"/>
                                <field name="currency_id"/>
                            </group>
                            <group string="Strategy Period">
                                <field name="start_date"/>
                                <field name="end_date"/>
                            </group>
                        </group>

                        <notebook>
                            <page string="Strategic Plan Budget" name="strategic_plan_budget">
                                <!-- Budget Overview Summary (Computed Totals) -->
                                <group string="Budget Overview - All Years (UGX Billions)" col="4">
                                    <field name="total_wage_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Total Wage (5 Years)" class="oe_subtotal_footer_separator"/>
                                    <field name="total_non_wage_recurrent_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Non-Wage Recurrent (5 Years)" class="oe_subtotal_footer_separator"/>
                                    <field name="total_development_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Development (5 Years)" class="oe_subtotal_footer_separator"/>
                                    <field name="total_budget_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Total Budget (5 Years)" class="oe_subtotal_footer_separator"/>
                                </group>



                                <separator string="Strategic Plan Budget - Editable Table"/>

                                <!-- Budget Summary Table -->
                                <div class="o_form_sheet">
                                    <table class="table table-striped table-bordered">
                                        <thead>
                                            <tr style="background-color: #875A7B; color: white;">
                                                <th style="text-align: left; padding: 8px; font-weight: bold;">BUDGET CATEGORY</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">FY2025/26</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">FY2026/27</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">FY2027/28</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">FY2028/29</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">FY2029/30</th>
                                                <th style="text-align: center; padding: 8px; font-weight: bold;">TOTAL (5 YEARS)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="padding: 8px; font-weight: bold;">Wage</td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="wage_fy2025_26" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="wage_fy2026_27" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="wage_fy2027_28" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="wage_fy2028_29" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="wage_fy2029_30" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px; font-weight: bold; background-color: #f8f9fa;">
                                                    <field name="total_wage_all_years" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; font-weight: bold;">Non-Wage Recurrent</td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="non_wage_recurrent_fy2025_26" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="non_wage_recurrent_fy2026_27" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="non_wage_recurrent_fy2027_28" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="non_wage_recurrent_fy2028_29" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="non_wage_recurrent_fy2029_30" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px; font-weight: bold; background-color: #f8f9fa;">
                                                    <field name="total_non_wage_recurrent_all_years" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; font-weight: bold;">Development</td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_development_fy2025_26" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_development_fy2026_27" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_development_fy2027_28" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_development_fy2028_29" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_development_fy2029_30" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px; font-weight: bold; background-color: #f8f9fa;">
                                                    <field name="total_development_all_years" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                            </tr>
                                            <tr style="background-color: #e9ecef; font-weight: bold;">
                                                <td style="padding: 8px; font-weight: bold;">Total Recurrent</td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_recurrent_fy2025_26" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_recurrent_fy2026_27" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_recurrent_fy2027_28" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_recurrent_fy2028_29" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_recurrent_fy2029_30" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px; font-weight: bold; background-color: #f8f9fa;">
                                                    <field name="total_recurrent_all_years" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                                </td>
                                            </tr>
                                            <tr style="background-color: #875A7B; color: white; font-weight: bold;">
                                                <td style="padding: 8px; font-weight: bold;">TOTAL BUDGET</td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_budget_fy2025_26" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_budget_fy2026_27" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_budget_fy2027_28" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_budget_fy2028_29" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px;">
                                                    <field name="total_budget_fy2029_30" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                                <td style="text-align: right; padding: 8px; font-weight: bold; background-color: #6c4a6b;">
                                                    <field name="total_budget_all_years" nolabel="1" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" style="color: white;"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </page>

                            <page string="MTEF Projections" name="mtef_projections">
                                <!-- MTEF Overview Summary -->
                                <group string="MTEF Overview - All Years (UGX Billions)" col="4">
                                    <field name="mtef_total_gou_total_excl_ext_fin_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="GoU Total (Excl. Ext. Fin.)"/>
                                    <field name="mtef_total_external_financing_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="External Financing"/>
                                    <field name="mtef_total_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Arrears"/>
                                    <field name="mtef_total_vote_budget_excl_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Vote Budget (Excl. Arrears)" class="oe_subtotal_footer_separator"/>
                                </group>

                                <separator string="MTEF Projections - Editable Table"/>

                                <!-- MTEF Compact Table -->
                                <div class="o_group">
                                    <table class="table table-sm table-striped o_list_table">
                                        <thead>
                                            <tr>
                                                <th class="o_list_char" style="width: 200px; font-weight: bold;">Budget Category</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2025/26</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2026/27</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2027/28</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2028/29</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2029/30</th>
                                                <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold; background-color: #f8f9fa;">Total (5 Years)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="o_list_char" style="font-weight: 500;">Wage</td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_wage_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_wage_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_wage_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_wage_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_wage_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                                    <field name="mtef_total_wage_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="o_list_char" style="font-weight: 500;">Non-Wage Recurrent</td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_non_wage_recurrent_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_non_wage_recurrent_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_non_wage_recurrent_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_non_wage_recurrent_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_non_wage_recurrent_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                                    <field name="mtef_total_non_wage_recurrent_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="o_list_char" style="font-weight: 500;">GoU Development</td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_gou_devt_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_gou_devt_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_gou_devt_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_gou_devt_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_gou_devt_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                                    <field name="mtef_total_gou_devt_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="o_list_char" style="font-weight: 500;">External Financing</td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_external_financing_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_external_financing_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_external_financing_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_external_financing_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_external_financing_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                                    <field name="mtef_total_external_financing_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="o_list_char" style="font-weight: 500;">Arrears</td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_arrears_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_arrears_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_arrears_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_arrears_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right">
                                                    <field name="mtef_arrears_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                                    <field name="mtef_total_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                            <tr class="table-active" style="border-top: 2px solid #dee2e6;">
                                                <td class="o_list_char" style="font-weight: bold; background-color: #e9ecef;">Total Budget</td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                                    <field name="mtef_total_budget_fy2025_26" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                                    <field name="mtef_total_budget_fy2026_27" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                                    <field name="mtef_total_budget_fy2027_28" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                                    <field name="mtef_total_budget_fy2028_29" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                                    <field name="mtef_total_budget_fy2029_30" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                                <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #d1ecf1; border: 2px solid #bee5eb;">
                                                    <field name="mtef_total_vote_budget_excl_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </page>



                            <page string="Programme Budget Allocations" name="programme_budgets">
                                <field name="programme_budget_ids" context="{'default_financial_strategy_id': id}">
                                    <list editable="bottom">
                                        <field name="sequence" string="S/N"/>
                                        <field name="programme_id" options="{'no_create': True}"/>
                                        <field name="budget_fy2025_26" sum="Total FY2025/26"/>
                                        <field name="budget_fy2026_27" sum="Total FY2026/27"/>
                                        <field name="budget_fy2027_28" sum="Total FY2027/28"/>
                                        <field name="budget_fy2028_29" sum="Total FY2028/29"/>
                                        <field name="budget_fy2029_30" sum="Total FY2029/30"/>
                                        <field name="total_budget" sum="Grand Total"/>
                                        <field name="status" widget="badge"
                                               decoration-success="status == 'approved'"
                                               decoration-info="status == 'active'"
                                               decoration-muted="status == 'draft'"/>
                                        <field name="financial_strategy_id" invisible="1"/>
                                    </list>
                                </field>
                            </page>

                            <page string="Financial Analysis &amp; Integration" name="financial_analysis">
                                <group>
                                    <group string="Analysis Overview">
                                        <field name="analysis_count"/>
                                        <field name="integration_count"/>
                                        <field name="dashboard_count"/>
                                    </group>
                                </group>

                                <separator string="Financial Analyses"/>
                                <field name="financial_analysis_ids">
                                    <list string="Financial Analyses" decoration-info="state=='draft'" decoration-success="state=='approved'">
                                        <field name="name"/>
                                        <field name="analysis_type"/>
                                        <field name="scope"/>
                                        <field name="fiscal_year"/>
                                        <field name="analysis_date"/>
                                        <field name="total_budget_analyzed" widget="float"/>
                                        <field name="efficiency_score" widget="progressbar"/>
                                        <field name="risk_level"/>
                                        <field name="state"/>
                                    </list>
                                </field>

                                <separator string="Financial Integrations"/>
                                <field name="financial_integration_ids">
                                    <list string="Financial Integrations" decoration-info="state=='draft'" decoration-success="state=='completed'">
                                        <field name="name"/>
                                        <field name="integration_type"/>
                                        <field name="scope"/>
                                        <field name="fiscal_year_focus"/>
                                        <field name="integration_date"/>
                                        <field name="total_budget_integrated" widget="float"/>
                                        <field name="performance_score" widget="progressbar"/>
                                        <field name="integration_completeness" widget="progressbar"/>
                                        <field name="state"/>
                                    </list>
                                </field>

                                <separator string="Financial Dashboards"/>
                                <field name="financial_dashboard_ids">
                                    <list string="Financial Dashboards" decoration-info="state=='draft'" decoration-success="state=='active'">
                                        <field name="name"/>
                                        <field name="dashboard_type"/>
                                        <field name="dashboard_date"/>
                                        <field name="total_budget" widget="float"/>
                                        <field name="performance_score" widget="progressbar"/>
                                        <field name="risk_score" widget="progressbar"/>
                                        <field name="last_refresh"/>
                                        <field name="state"/>
                                    </list>
                                </field>
                            </page>

                            <page string="Description" name="description">
                                <field name="description" widget="html"/>
                            </page>
                        </notebook>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <!-- Strategic Plan Budget Form View -->
        <record id="view_strategic_plan_budget_form" model="ir.ui.view">
            <field name="name">strategic.plan.budget.form</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <form string="Strategic Plan Budget" create="false" edit="true" delete="false">
                    <!-- Header removed for full screen experience -->
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1" style="color: #2E7D32; font-weight: bold;"/>
                            </h1>
                        </div>

                        <group>
                            <group string="Strategy Information">
                                <field name="start_date" readonly="1"/>
                                <field name="end_date" readonly="1"/>
                                <field name="currency_id" readonly="1"/>
                            </group>
                            <group string="Budget Summary (UGX Billions)">
                                <field name="total_wage_all_years" readonly="1" widget="float" string="Total Wage (5 Years)" style="font-weight: bold; color: #1976D2;"/>
                                <field name="total_non_wage_recurrent_all_years" readonly="1" widget="float" string="Non-Wage Recurrent (5 Years)" style="font-weight: bold; color: #1976D2;"/>
                                <field name="total_development_all_years" readonly="1" widget="float" string="Development (5 Years)" style="font-weight: bold; color: #1976D2;"/>
                                <field name="total_budget_all_years" readonly="1" widget="float" string="Total Budget (5 Years)" style="font-weight: bold; color: #D32F2F; font-size: 16px;"/>
                            </group>
                        </group>

                        <separator string="Strategic Plan Budget Allocations by Fiscal Year" style="margin-top: 20px;"/>

                        <!-- Professional Budget Table -->
                        <div style="margin: 20px 0;">
                            <table class="table table-bordered table-hover" style="margin-bottom: 0;">
                                <thead style="background-color: #E3F2FD;">
                                    <tr>
                                        <th style="width: 200px; font-weight: bold; color: #1565C0; padding: 12px; border: 1px solid #BBDEFB;">Budget Category</th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB;">FY2025/26<br/><small>(Approved)</small></th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB;">FY2026/27</th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB;">FY2027/28</th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB;">FY2028/29</th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB;">FY2029/30</th>
                                        <th style="width: 140px; font-weight: bold; color: #1565C0; text-align: center; padding: 12px; border: 1px solid #BBDEFB; background-color: #FFF3E0;">Total<br/><small>(UGX Bns)</small></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Wage Row -->
                                    <tr style="background-color: #FAFAFA;">
                                        <td style="font-weight: 600; color: #424242; padding: 10px; border: 1px solid #E0E0E0;">üí∞ Wage</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="wage_fy2025_26" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="wage_fy2026_27" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="wage_fy2027_28" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="wage_fy2028_29" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="wage_fy2029_30" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0; background-color: #FFF3E0; font-weight: bold; color: #E65100;">
                                            <field name="total_wage_all_years" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold;"/>
                                        </td>
                                    </tr>

                                    <!-- Non-Wage Recurrent Row -->
                                    <tr style="background-color: #FFFFFF;">
                                        <td style="font-weight: 600; color: #424242; padding: 10px; border: 1px solid #E0E0E0;">üè¢ Non-Wage Recurrent</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="non_wage_recurrent_fy2025_26" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="non_wage_recurrent_fy2026_27" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="non_wage_recurrent_fy2027_28" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="non_wage_recurrent_fy2028_29" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="non_wage_recurrent_fy2029_30" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0; background-color: #FFF3E0; font-weight: bold; color: #E65100;">
                                            <field name="total_non_wage_recurrent_all_years" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold;"/>
                                        </td>
                                    </tr>

                                    <!-- Development Row -->
                                    <tr style="background-color: #FAFAFA;">
                                        <td style="font-weight: 600; color: #424242; padding: 10px; border: 1px solid #E0E0E0;">üöß Development</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="total_development_fy2025_26" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="total_development_fy2026_27" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="total_development_fy2027_28" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="total_development_fy2028_29" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0;">
                                            <field name="total_development_fy2029_30" widget="float" nolabel="1" style="text-align: center; font-weight: 500;"/>
                                        </td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #E0E0E0; background-color: #FFF3E0; font-weight: bold; color: #E65100;">
                                            <field name="total_development_all_years" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold;"/>
                                        </td>
                                    </tr>

                                    <!-- Total Budget Row -->
                                    <tr style="background-color: #E8F5E8; border-top: 3px solid #4CAF50;">
                                        <td style="font-weight: bold; color: #2E7D32; padding: 12px; border: 1px solid #4CAF50; font-size: 14px;">üìä TOTAL BUDGET</td>
                                        <td style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">
                                            <field name="total_budget_fy2025_26" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 14px;"/>
                                        </td>
                                        <td style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">
                                            <field name="total_budget_fy2026_27" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 14px;"/>
                                        </td>
                                        <td style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">
                                            <field name="total_budget_fy2027_28" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 14px;"/>
                                        </td>
                                        <td style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">
                                            <field name="total_budget_fy2028_29" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 14px;"/>
                                        </td>
                                        <td style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">
                                            <field name="total_budget_fy2029_30" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 14px;"/>
                                        </td>
                                        <td style="text-align: center; padding: 10px; border: 2px solid #2E7D32; background-color: #C8E6C9; font-weight: bold; color: #1B5E20; font-size: 16px;">
                                            <field name="total_budget_all_years" readonly="1" widget="float" nolabel="1" style="text-align: center; font-weight: bold; font-size: 16px;"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <separator string="Classification of Budget by Source of Funding (UGX Billions)" style="margin-top: 30px;"/>

                        <!-- Funding Source Classification Table -->
                        <div style="margin: 20px 0;">
                            <table class="table table-bordered table-hover" style="margin-bottom: 0;">
                                <thead style="background-color: #E8F5E8;">
                                    <tr>
                                        <th rowspan="2" style="text-align: center; vertical-align: middle; padding: 12px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Classification</th>
                                        <th colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">FY2025/26</th>
                                        <th colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">FY2026/27</th>
                                        <th colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">FY2027/28</th>
                                        <th colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">FY2028/29</th>
                                        <th colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">FY2029/30</th>
                                        <th rowspan="2" style="text-align: center; vertical-align: middle; padding: 12px; border: 2px solid #2E7D32; font-weight: bold; color: #1B5E20; background-color: #C8E6C9;">Total</th>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">GoU</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Donor</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">GoU</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Donor</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">GoU</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Donor</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">GoU</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Donor</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">GoU</th>
                                        <th style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">Donor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Wage Row -->
                                    <tr style="background-color: #FFF3E0;">
                                        <td style="font-weight: bold; padding: 10px; border: 1px solid #FF9800; color: #E65100;">üí∞ Wage</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">182.732</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">193.655</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">212.196</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">213.579</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">223.775</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF9800; font-weight: bold; color: #E65100;">1025.937</td>
                                    </tr>

                                    <!-- Non-Wage Recurrent Row -->
                                    <tr style="background-color: #F3E5F5;">
                                        <td style="font-weight: bold; padding: 10px; border: 1px solid #9C27B0; color: #6A1B9A;">üè¢ Non-Wage Recurrent</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">164.136</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">188.267</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">199.674</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">190.894</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">204.834</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd; background-color: #F5F5F5;">-</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">947.805</td>
                                    </tr>

                                    <!-- Total Recurrent Row -->
                                    <tr style="background-color: #E1F5FE; border-top: 2px solid #0277BD;">
                                        <td style="font-weight: bold; padding: 10px; border: 1px solid #0277BD; color: #01579B;">üìã Total Recurrent</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">346.868</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">0</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">381.922</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">0</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">411.87</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">0</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">404.473</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">0</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">428.609</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold;">0</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #0277BD; font-weight: bold; color: #01579B;">1973.742</td>
                                    </tr>

                                    <!-- Development Row -->
                                    <tr style="background-color: #E8F5E8;">
                                        <td style="font-weight: bold; padding: 10px; border: 1px solid #4CAF50; color: #2E7D32;">üèóÔ∏è Development</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">221.619</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">1036.181</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">254.862</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">1220.518</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">280.348</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">1212.782</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">336.417</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">1174.643</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">403.701</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #ddd;">1428.236</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32;">7569.307</td>
                                    </tr>

                                    <!-- Sub Totals Row -->
                                    <tr style="background-color: #FFF8E1; border-top: 2px solid #FF8F00;">
                                        <td style="font-weight: bold; padding: 10px; border: 1px solid #FF8F00; color: #E65100;">üìä Sub Totals</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">568.487</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">1036.181</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">636.784</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">1220.518</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">692.218</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">1212.782</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">740.89</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">1174.643</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">832.31</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold;">1428.236</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #FF8F00; font-weight: bold; color: #E65100;">9543.049</td>
                                    </tr>

                                    <!-- Total Budget Row -->
                                    <tr style="background-color: #E8F5E8; border-top: 3px solid #4CAF50;">
                                        <td style="font-weight: bold; color: #2E7D32; padding: 12px; border: 1px solid #4CAF50; font-size: 14px;">üí∞ Total Budget</td>
                                        <td colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32; font-size: 14px;">1604.668</td>
                                        <td colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32; font-size: 14px;">1857.302</td>
                                        <td colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32; font-size: 14px;">1905</td>
                                        <td colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32; font-size: 14px;">1915.533</td>
                                        <td colspan="2" style="text-align: center; padding: 10px; border: 1px solid #4CAF50; font-weight: bold; color: #2E7D32; font-size: 14px;">2260.546</td>
                                        <td style="text-align: center; padding: 10px; border: 2px solid #2E7D32; background-color: #C8E6C9; font-weight: bold; color: #1B5E20; font-size: 16px;">9543.049</td>
                                    </tr>

                                    <!-- Percentage of Source Row -->
                                    <tr style="background-color: #F3E5F5; border-top: 2px solid #9C27B0;">
                                        <td style="font-weight: bold; color: #6A1B9A; padding: 12px; border: 1px solid #9C27B0; font-size: 14px;">üìà % of Source</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">35%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">65%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">34%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">66%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">36%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">64%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">39%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">61%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">37%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A;">63%</td>
                                        <td style="text-align: center; padding: 8px; border: 1px solid #9C27B0; font-weight: bold; color: #6A1B9A; font-size: 14px;">-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Additional Information -->
                        <div style="margin-top: 30px; padding: 15px; background-color: #F5F5F5; border-radius: 8px;">
                            <h4 style="color: #1565C0; margin-bottom: 10px;">üìã Budget Notes</h4>
                            <ul style="color: #424242; line-height: 1.6;">
                                <li><strong>Currency:</strong> All amounts are in UGX Billions</li>
                                <li><strong>FY2025/26:</strong> Approved budget for the current fiscal year</li>
                                <li><strong>Strategic Period:</strong> 5-year budget allocation covering FY2025/26 to FY2029/30</li>
                                <li><strong>Total Budget:</strong> <span style="color: #D32F2F; font-weight: bold;">UGX 9,543.05 Billion</span> over the strategic plan period</li>
                                <li><strong>Funding Sources:</strong> GoU (Government of Uganda) and Donor funding with varying percentages across fiscal years</li>
                                <li><strong>Development Focus:</strong> Significant donor contribution to development projects (average 64% donor funding)</li>
                            </ul>
                        </div>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <!-- MTEF Projections Form View -->
        <record id="view_mtef_projections_form" model="ir.ui.view">
            <field name="name">mtef.projections.form</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <form string="MTEF Projections" class="o_form_view_fullscreen">
                    <!-- Header removed for full screen experience -->
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="MTEF Projections Name..."/>
                            </h1>
                        </div>

                        <group>
                            <group string="Basic Information">
                                <field name="sequence"/>
                                <field name="active"/>
                                <field name="responsible_user_id" widget="many2one_avatar_user"/>
                                <field name="currency_id"/>
                            </group>
                            <group string="Strategy Period">
                                <field name="start_date"/>
                                <field name="end_date"/>
                            </group>
                        </group>

                        <!-- MTEF Overview Summary -->
                        <group string="MTEF Overview - All Years (UGX Billions)" col="4">
                            <field name="mtef_total_gou_total_excl_ext_fin_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="GoU Total (Excl. Ext. Fin.)"/>
                            <field name="mtef_total_external_financing_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="External Financing"/>
                            <field name="mtef_total_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Arrears"/>
                            <field name="mtef_total_vote_budget_excl_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" string="Vote Budget (Excl. Arrears)" class="oe_subtotal_footer_separator"/>
                        </group>

                        <separator string="MTEF Projections - Editable Table"/>

                        <!-- MTEF Compact Table -->
                        <div class="o_group">
                            <table class="table table-sm table-striped o_list_table">
                                <thead>
                                    <tr>
                                        <th class="o_list_char" style="width: 200px; font-weight: bold;">Budget Category</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2025/26</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2026/27</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2027/28</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2028/29</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold;">FY2029/30</th>
                                        <th class="o_list_monetary text-right" style="width: 150px; font-weight: bold; background-color: #f8f9fa;">Total (5 Years)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="o_list_char" style="font-weight: 500;">Wage</td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_wage_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_wage_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_wage_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_wage_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_wage_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                            <field name="mtef_total_wage_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="o_list_char" style="font-weight: 500;">Non-Wage Recurrent</td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_non_wage_recurrent_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_non_wage_recurrent_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_non_wage_recurrent_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_non_wage_recurrent_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_non_wage_recurrent_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                            <field name="mtef_total_non_wage_recurrent_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="o_list_char" style="font-weight: 500;">GoU Development</td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_gou_devt_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_gou_devt_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_gou_devt_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_gou_devt_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_gou_devt_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                            <field name="mtef_total_gou_devt_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="o_list_char" style="font-weight: 500;">External Financing</td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_external_financing_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_external_financing_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_external_financing_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_external_financing_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_external_financing_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                            <field name="mtef_total_external_financing_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="o_list_char" style="font-weight: 500;">Arrears</td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_arrears_fy2025_26" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_arrears_fy2026_27" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_arrears_fy2027_28" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_arrears_fy2028_29" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right">
                                            <field name="mtef_arrears_fy2029_30" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="background-color: #f8f9fa; font-weight: bold;">
                                            <field name="mtef_total_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                    <tr class="table-active" style="border-top: 2px solid #dee2e6;">
                                        <td class="o_list_char" style="font-weight: bold; background-color: #e9ecef;">Total Budget</td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                            <field name="mtef_total_budget_fy2025_26" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                            <field name="mtef_total_budget_fy2026_27" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                            <field name="mtef_total_budget_fy2027_28" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                            <field name="mtef_total_budget_fy2028_29" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #e9ecef;">
                                            <field name="mtef_total_budget_fy2029_30" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                        <td class="o_list_monetary text-right" style="font-weight: bold; background-color: #d1ecf1; border: 2px solid #bee5eb;">
                                            <field name="mtef_total_vote_budget_excl_arrears_all_years" readonly="1" widget="monetary" options="{'currency_field': 'currency_id'}" nolabel="1"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <!-- Financial Strategy Kanban View -->
        <record id="view_financial_strategy_kanban" model="ir.ui.view">
            <field name="name">financial.strategy.kanban</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_dashboard" default_group_by="status">
                    <field name="name"/>
                    <field name="status"/>
                    <field name="total_budget_all_years"/>
                    <field name="responsible_user_id"/>
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="currency_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_card_header">
                                    <div class="o_kanban_card_header_title">
                                        <div class="o_primary">
                                            <strong><field name="name"/></strong>
                                        </div>
                                        <div class="o_secondary">
                                            <span class="badge" t-attf-class="badge-#{record.status.raw_value == 'active' ? 'success' : record.status.raw_value == 'approved' ? 'info' : record.status.raw_value == 'draft' ? 'warning' : 'secondary'}">
                                                <field name="status"/>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="o_kanban_card_content">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong>Total Budget:</strong><br/>
                                            <span class="text-success">
                                                <field name="total_budget_all_years" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                            </span>
                                        </div>
                                        <div class="col-6">
                                            <strong>Period:</strong><br/>
                                            <field name="start_date"/> - <field name="end_date"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="o_kanban_card_footer">
                                    <div class="o_kanban_card_footer_left">
                                        <field name="responsible_user_id" widget="many2one_avatar_user"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!-- Financial Strategy Search View -->
        <record id="view_financial_strategy_search" model="ir.ui.view">
            <field name="name">financial.strategy.search</field>
            <field name="model">financial.strategy</field>
            <field name="arch" type="xml">
                <search string="Financial Strategies">
                    <field name="name" string="Strategy Name"/>
                    <field name="responsible_user_id" string="Responsible Person"/>
                    <field name="status"/>
                    <separator/>
                    <filter string="Active" name="active" domain="[('active', '=', True)]"/>
                    <filter string="Draft" name="draft" domain="[('status', '=', 'draft')]"/>
                    <filter string="Approved" name="approved" domain="[('status', '=', 'approved')]"/>
                    <filter string="Active Status" name="active_status" domain="[('status', '=', 'active')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Status" name="group_status" context="{'group_by': 'status'}"/>
                        <filter string="Responsible Person" name="group_responsible" context="{'group_by': 'responsible_user_id'}"/>
                        <filter string="Start Date" name="group_start_date" context="{'group_by': 'start_date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Strategic Plan Budget Action -->
        <record id="action_strategic_plan_budget" model="ir.actions.act_window">
            <field name="name">Strategic Plan Budget</field>
            <field name="res_model">financial.strategy</field>
            <field name="view_mode">form,list</field>
            <field name="view_id" ref="view_strategic_plan_budget_form"/>
            <field name="search_view_id" ref="view_financial_strategy_search"/>
            <field name="res_id" ref="financial_strategy_strategic_plan_budget"/>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Strategic Plan Budget
                </p>
                <p>
                    View and manage the strategic plan budget allocations across wage,
                    non-wage recurrent, and development categories for the 5-year strategic plan period.
                </p>
            </field>
        </record>

        <!-- MTEF Projections Action -->
        <record id="action_mtef_projections" model="ir.actions.act_window">
            <field name="name">MTEF Projections</field>
            <field name="res_model">financial.strategy</field>
            <field name="view_mode">form,list</field>
            <field name="view_id" ref="view_mtef_projections_form"/>
            <field name="search_view_id" ref="view_financial_strategy_search"/>
            <field name="res_id" ref="financial_strategy_mtef_projections"/>
            <field name="target">current</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    MTEF Projections
                </p>
                <p>
                    View and manage Medium-Term Expenditure Framework (MTEF) projections with detailed budget
                    forecasts across multiple fiscal years for comprehensive financial planning.
                </p>
            </field>
        </record>

        <!-- Financial Strategy Action (Legacy - for backward compatibility) -->
        <record id="action_financial_strategy" model="ir.actions.act_window">
            <field name="name">Financial Strategy</field>
            <field name="res_model">financial.strategy</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="search_view_id" ref="view_financial_strategy_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first Financial Strategy!
                </p>
                <p>
                    Financial strategies define the overall strategic plan budget with multi-year allocations
                    across wage, non-wage recurrent, and development categories.
                </p>
            </field>
        </record>

    </data>
</odoo>
